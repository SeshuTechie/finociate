<div class="container-fluid">
    <h1 class="h3 mb-2 text-gray-800" *ngIf="isNewMode">New Transaction</h1>
    <h1 class="h3 mb-2 text-gray-800" *ngIf="!isNewMode">Update Transaction</h1>
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            Transaction
        </div>
        <div class="card-body">
            <div class="form-row" *ngIf="isNewMode">
                <div class="col">
                    <div class="form-group">
                        <textarea [(ngModel)]="transactionText" class="form-control" placeholder="Transaction Text"
                            rows="3"></textarea>
                    </div>
                </div>
                <div class="col">
                    <a class="btn btn-primary btn-circle" (click)="findTransaction()">
                        <i class="bi bi-search-heart"></i>
                    </a>
                </div>
            </div>
            <hr>
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.date" class="form-control"
                            placeholder="Date dd-MM-yyyy">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.description" class="form-control"
                            placeholder="Description" list="refDescriptions" (input)="descriptionChanged()">
                        <datalist id="refDescriptions">
                            <option *ngFor="let item of descriptions" [value]="item">{{item}}</option>
                        </datalist>                            
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="number" [(ngModel)]="transaction.amount" class="form-control" placeholder="Amount">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <select class="form-control" [(ngModel)]="transaction.type" id="type">
                            <option value="" disabled selected>Select Type</option>
                            <option value="debit">Debit</option>
                            <option value="credit">Credit</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.account" class="form-control" placeholder="Account"
                            list="refDataAccounts">
                        <datalist id="refDataAccounts">
                            <option *ngFor="let item of accounts" [value]="item">{{item}}</option>
                        </datalist>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.category" class="form-control"
                            placeholder="Category" list="refDataCategories">
                        <datalist id="refDataCategories">
                            <option *ngFor="let item of categories" [value]="item">{{item}}</option>
                        </datalist>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.subCategory" class="form-control"
                            placeholder="Sub-Category" list="refDataSubCategories">
                            <datalist id="refDataSubCategories">
                                <option *ngFor="let item of subcategories" [value]="item">{{item}}</option>
                            </datalist>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.store" class="form-control"
                            placeholder="Store/Place" list="refDataStores">
                        <datalist id="refDataStores">
                            <option *ngFor="let item of stores" [value]="item">{{item}}</option>
                        </datalist>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" [(ngModel)]="transaction.mode" class="form-control" placeholder="Mode" list="refDataModes">
                        <datalist id="refDataModes">
                            <option *ngFor="let item of modes" [value]="item">{{item}}</option>
                        </datalist>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="text" [(ngModel)]="transaction.particulars" class="form-control" placeholder="Patriculars">
            </div>
            <div class="form-group">
                <input type="text" [(ngModel)]="transaction.notes" class="form-control" placeholder="Notes">
            </div>
            <!--
            <div class="form-group">
                <input type="text" [(ngModel)]="transaction.tags" class="form-control" placeholder="Tags">
            </div>
            -->
            <div class="form-group" *ngIf="isNewMode">
                <button class="btn btn-success btn-lg btn-block" (click)="addTransaction(transaction)">Add
                    Transaction</button>
            </div>
            <div class="form-group" *ngIf="!isNewMode">
                <button class="btn btn-success btn-lg btn-block" (click)="editTransaction(transaction)">Update
                    Transaction</button>
            </div>
            <div class="form-group">
                <a class="btn btn-warning btn-lg btn-block" routerLink="/transactions">Cancel</a>
            </div>
        </div>
    </div>